{% extends 'homeAddmin/home.html' %}
{% load static %}

{% block title %} পণ্যের বিস্তারিত {% endblock %}

{% block head %}
<style>
    .qty-btn {
        background-color: #10b981;
        padding: 5px 10px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 18px;
        color: white;
    }
</style>
{% endblock %}

{% block body %}

<div class="max-w-7xl mx-auto px-4 md:px-8 py-16 my-20">
  <div class="flex flex-col md:flex-row gap-12">

    <!-- Left: Product Image -->
    <div class="md:w-1/2 flex flex-col items-center">
      <div
        class="w-full h-[500px] bg-gray-50 rounded-xl shadow-lg overflow-hidden">
        {% if products.image %}
        <img src="{{ products.image.url }}" alt="{{ prod.name }}"
          class="w-full h-full object-cover">
        {% else %}
        <img src="{% static 'images/homeadvatigeimages.png' %}"
          alt="{{ prod.name }}" class="w-full h-full object-cover">
        {% endif %}
      </div>

      <!-- Carousel Dots -->
      <div class="flex mt-4 space-x-2">
        <span class="w-3 h-3 bg-gray-400 rounded-full"></span>
        <span class="w-3 h-3 bg-gray-400 rounded-full"></span>
        <span class="w-3 h-3 bg-gray-400 rounded-full"></span>
      </div>

      <!-- Buy Button -->
      <button
        class="bg-green-600 hover:bg-green-700 text-white mt-8 w-full py-3 rounded-lg font-semibold shadow-md transition-all duration-200">
        Buy Now
      </button>
    </div>

    <!-- Right: Product Details -->
    <div class="md:w-1/2 flex flex-col justify-start">
      <span class="text-sm uppercase text-gray-500 tracking-wide">New
        Collection</span>
      <h1 class="text-4xl font-bold mt-2 text-gray-800">{{ products.name }}</h1>
      <p class="text-gray-600 text-lg mt-1">Color: White</p>

      <!-- Rating -->
      <div class="flex items-center mt-4 space-x-2">
        <div class="flex text-yellow-400">
          {% for i in "1234" %}
          <svg class="w-5 h-5 fill-current" viewBox="0 0 20 20">
            <path
              d="M10 15l-5.878 3.09 1.123-6.545L.488 6.91l6.561-.955L10 0l2.951 5.955 6.561.955-4.757 4.635 1.123 6.545z" />
          </svg>
          {% endfor %}
          <svg class="w-5 h-5 text-gray-300 fill-current" viewBox="0 0 20 20">
            <path
              d="M10 15l-5.878 3.09 1.123-6.545L.488 6.91l6.561-.955L10 0l2.951 5.955 6.561.955-4.757 4.635 1.123 6.545z" />
          </svg>
        </div>
        <span class="text-sm text-blue-600 underline hover:text-blue-800"><a
            href="#">View Reviews</a></span>
      </div>

      <!-- Price -->
      <p class="text-3xl font-bold text-red-500 mt-5">${{ products.price }}</p>

      <!-- Quantity Selector -->
      <div class="flex items-center mt-6 space-x-4">
        <button
          class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 font-bold text-lg"
          onclick="changeQty(-1)">−</button>
        <span id="qty" class="text-2xl font-semibold">1</span>
        <button
          class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 font-bold text-lg"
          onclick="changeQty(1)">+</button>
      </div>

      <!-- Price (will update dynamically) -->
      <p class="text-3xl font-bold text-red-500 mt-4">
        Price: <span id="total-price">{{ prod.price }}</span>
      </p>

      <!-- Add to Cart -->
      <button
        class="mt-6 w-48 bg-red-500 hover:bg-red-600 text-white font-semibold py-3 rounded-lg shadow-md transition-all duration-200">
        Add to Cart
      </button>

      <!-- Tabs -->
      <div class="mt-10">
        <div class="flex border-b border-gray-300">
          <button id="tab-desc"
            class="py-2 px-4 text-blue-600 border-b-2 border-blue-600 font-semibold"
            onclick="switchTab('description')">
            Description
          </button>
          <button id="tab-details"
            class="py-2 px-4 text-gray-600 hover:text-blue-600 font-semibold"
            onclick="switchTab('details')">
            Details
          </button>
        </div>

        <div class="bg-gray-50 p-6 rounded-b-lg shadow-inner mt-2">
          <div id="description-content" class="h-32">
    <p class="text-gray-700 leading-relaxed">{{ products.description }}</p>
</div>

          <div id="details-content" class="hidden h-32">
    <p class="text-gray-700">In Stock: <strong>{{ products.stock }}</strong> {{ products.unit }}</p>
</div>

        </div>
      </div>

    </div>
  </div>
</div>
<!-- <script>
let unitPrice = parseFloat(document.getElementById('total-price').innerText);

function changeQty(num) {
    const qtyEl = document.getElementById('qty');
    const priceEl = document.getElementById('total-price');

    let qty = parseInt(qtyEl.innerText);
    qty += num;
    if (qty < 1) qty = 1; // minimum quantity is 1
    qtyEl.innerText = qty;

    const total = qty * unitPrice;
    priceEl.innerText = total.toFixed(2); // update the price dynamically
}

// Initialize price on page load
window.onload = () => {
    const qty = parseInt(document.getElementById('qty').innerText);
    document.getElementById('total-price').innerText = (unitPrice * qty).toFixed(2);
};
</script> -->
<script>
let unitPrice = parseFloat({{ products.price }}); // Get price from Django context

function changeQty(num) {
    const qtyEl = document.getElementById('qty');
    const priceEl = document.getElementById('total-price');

    let qty = parseInt(qtyEl.innerText);
    qty += num;
    if (qty < 1) qty = 1; // minimum quantity is 1
    qtyEl.innerText = qty;

    const total = qty * unitPrice;
    priceEl.innerText = total.toFixed(2); // update price dynamically
}

// Initialize price
window.onload = () => {
    const qty = parseInt(document.getElementById('qty').innerText);
    document.getElementById('total-price').innerText = (unitPrice * qty).toFixed(2);
};
</script>

<script>
  function switchTab(tab) {
  const desc = document.getElementById('description-content');
  const det = document.getElementById('details-content');
  const tabDesc = document.getElementById('tab-desc');
  const tabDetails = document.getElementById('tab-details');

  if (tab === 'description') {
    desc.classList.remove('hidden');
    det.classList.add('hidden');
    tabDesc.classList.add('text-blue-600', 'border-b-2', 'border-blue-600');
    tabDesc.classList.remove('text-gray-500');
    tabDetails.classList.add('text-gray-500');
    tabDetails.classList.remove('text-blue-600', 'border-b-2', 'border-blue-600');
  } else {
    det.classList.remove('hidden');
    desc.classList.add('hidden');
    tabDetails.classList.add('text-blue-600', 'border-b-2', 'border-blue-600');
    tabDetails.classList.remove('text-gray-500');
    tabDesc.classList.add('text-gray-500');
    tabDesc.classList.remove('text-blue-600', 'border-b-2', 'border-blue-600');
  }
}

</script>
{% endblock %}
